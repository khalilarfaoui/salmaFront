<style>
  label {
    font-weight: bold;
  }

  table {
  border-collapse: collapse;
  width: 100%;
  margin-bottom: 1rem;
  color: #212529;
}

th,
td {
  padding: 0.75rem;
  vertical-align: top;
  border-top: 1px solid #dee2e6;
}

th {
  text-align: left;
  font-weight: bold;
}

table caption {
  padding-top: 1rem;
  padding-bottom: 1rem;
  color: #868e96;
  text-align: left;
  caption-side: bottom;
}

</style>

<div class="container mt-4">
  <h4 class="text-center mb-4" style="font-family: cursive; font-size: 18px; text-align: center;">Liste des Ressources
    Matérielles</h4>
  <hr>
  <div class="d-flex justify-content-start mb-4">
    <button pButton pRipple style="width: 150px;" type="button" label="Ajouter" (click)="openAddDialog()" class="p-button-rounded"></button>
  </div>

  <table class="table table-striped table-hover">
    <thead class="table table-dark">
      <tr>

        <th>Nom</th>
        <th>Type</th>
        <th>Quantité</th>
        <th>Modele</th>
        <th>Utilisateur</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ressourceMateriel of ressourceMateriels">

        <td>{{ ressourceMateriel.name }}</td>
        <td>{{ ressourceMateriel.type }}</td>
        <td>{{ ressourceMateriel.quantite }}</td>
        <td>{{ ressourceMateriel.modele }}</td>
        <td>{{ ressourceMateriel.user.name }}</td>
        <td class="text-center">
          <button pButton pRipple type="button" icon="pi pi-pencil"
            class="md:align-self-end  p-button-rounded p-button-info"
            style="margin-left: 5px; width: 40px; height: 40px;" (click)="showDialog(ressourceMateriel)"></button>


          <button pButton pRipple type="button" icon="pi pi-trash" (click)="deleteSwal(ressourceMateriel)"
            style="margin-left: 5px; width: 40px; height: 40px;"
            class="md:align-self-end  p-button-rounded p-button-danger"></button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<p-dialog [(visible)]="showMatEdit" [style]="{width: '700px'}" header="Modifier ressource materiels" [modal]="true"
  styleClass="p-fluid">
  <ng-template pTemplate="content">
    <form class="forms-sample">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="exampleInputName1">Nom</label>
            <input ngModel name="name" [(ngModel)]="mat.name" placeholder="Nom" type="text" class="form-control input-field" #name="ngModel"
              required>
          </div>
          <div *ngIf="name.invalid && name.touched" class="text-danger">
            Nom est obligatoire.
          </div>
        </div>
        <div class="col-md-6">
          <label for="exampleSelectType">Type</label>
          <select ngModel class="form-control" id="exampleSelectType" name="type" [(ngModel)]="mat.type" #type="ngModel" required>
        
            <option value="Consomable">Consomable</option>
            <option value="Non consommable">Non consommable</option>
            <option value="Incongelable">Incongelable</option>
          </select>
          <div *ngIf="type.invalid && type.touched" class="text-danger">
            Type est obligatoire.
          </div>
        </div>

        <div class="col-md-6">
          <label for="exampleInputQuantite1">Quantite</label>
          <input ngModel placeholder="Quantité" name="quantite" [(ngModel)]="mat.quantite" type="number" class="form-control input-field"
            #quantite="ngModel" required>
          <div *ngIf="quantite.invalid && quantite.touched" class="text-danger">
            Quantité est obligatoire.
          </div>
        </div>

        <div class="col-md-6">
          <label for="exampleInputModele1">Modèle</label>
          <input ngModel placeholder="Modèle" name="modele" [(ngModel)]="mat.modele" type="text" class="form-control input-field"
            #modele="ngModel" required>
          <div *ngIf="modele.invalid && modele.touched" class="text-danger">
            Modèle est obligatoire.
          </div>
        </div>



      </div>
    </form>
  </ng-template>

  <ng-template pTemplate="footer">
    <button pButton label="Save" icon="pi pi-check" (click)="update()" class="p-button-text"></button>
    <button pButton label="Reset" icon="pi pi-refresh" (click)="reset()" class="p-button-text"></button>
  </ng-template>
</p-dialog>

<p-dialog [(visible)]="showMatadd" [style]="{width: '700px'}" header="Ajouter ressource materiels" [modal]="true"
  styleClass="p-fluid">
  <ng-template pTemplate="content">
    <form class="forms-sample">
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="exampleInputName1">Nom</label>
            <input ngModel name="name" [(ngModel)]="mat.name" placeholder="Nom" type="text" class="form-control input-field" #name="ngModel"
              required>
          </div>
          <div *ngIf="name.invalid && name.touched" class="text-danger">
            Nom est obligatoire.
          </div>
        </div>
        <div class="col-md-6">
          <label for="exampleSelectType">Type</label>
          <select ngModel class="form-control" id="exampleSelectType" name="type" [(ngModel)]="mat.type" #type="ngModel" required>
        
            <option value="Consomable">Consomable</option>
            <option value="Non consommable">Non consommable</option>
            <option value="Incongelable">Incongelable</option>
          </select>
          <div *ngIf="type.invalid && type.touched" class="text-danger">
            Type est obligatoire.
          </div>
        </div>

        <div class="col-md-6">
          <label for="exampleInputQuantite1">Quantite</label>
          <input ngModel placeholder="Quantité" name="quantite" [(ngModel)]="mat.quantite" type="number" class="form-control input-field"
            #quantite="ngModel" required>
          <div *ngIf="quantite.invalid && quantite.touched" class="text-danger">
            Quantité est obligatoire.
          </div>
        </div>

        <div class="col-md-6">
          <label for="exampleInputModele1">Modèle</label>
          <input ngModel placeholder="Modèle" name="modele" [(ngModel)]="mat.modele" type="text" class="form-control input-field"
            #modele="ngModel" required>
          <div *ngIf="modele.invalid && modele.touched" class="text-danger">
            Modèle est obligatoire.
          </div>
        </div>



      </div>
    </form>
  </ng-template>

  <ng-template pTemplate="footer">
    <button pButton label="Save" icon="pi pi-check" (click)="addMat()" class="p-button-text"></button>
    <button pButton label="Reset" icon="pi pi-refresh" (click)="reset()" class="p-button-text"></button>
  </ng-template>
</p-dialog>